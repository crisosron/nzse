name: Deploy CMS

on:
  workflow_run:
    workflows:
      - "Lint Client"
    types:
      - "completed"
    branches:
      - "deploy-production"

jobs:
  deploy:
    runs-on: ubuntu-18.04 # Matches the machine used by Digital Ocean App Platform
    steps:
      - uses: digitalocean/app_action@main
        with:
          app_name: nzse-admin
          token: ${{ secrets.DIGITALOCEAN_ACCESS_TOKEN }}
